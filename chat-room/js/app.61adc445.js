(function(){"use strict";var e={820:function(e,o,t){var a=t(751),r=t(641),l=t(953),n=t(33),s=t(134);const i={class:"auth"},c={class:"title"},u=(0,r.Lk)("div",{class:"navBarHover"},null,-1),d={class:"loginAndSignin"},p=(0,r.Lk)("label",{for:"email"},"帳號",-1),m=(0,r.Lk)("label",{for:"password"},"密碼",-1),v=(0,r.Lk)("button",{type:"submit"},"登入",-1),f={class:"emailOrPasswordError"},h=(0,r.Lk)("label",{for:"email"},"帳號",-1),k=(0,r.Lk)("label",{for:"password"},"密碼",-1),g=(0,r.Lk)("button",{type:"submit"},"註冊",-1),L={class:"signinSuccess"},w={class:"duplicate"};var b={__name:"auth-item",emits:["open-chat-room"],setup(e,{emit:o}){const t=o,b=(0,l.Kh)({error:!1,success:!1,duplicate:!1}),y=(0,l.KR)(!0),S=(0,l.KR)([]);let C=(0,l.Kh)({email:"",password:""});const R=()=>{y.value=!0,document.querySelector(".navBarHover").style="left: 77px",C.email=C.password="",b.error=!1,b.success=!1,b.duplicate=!1},O=()=>{y.value=!1,document.querySelector(".navBarHover").style="left: 233px",C.email=C.password="",b.error=!1,b.success=!1,b.duplicate=!1},x=()=>{let e=!1;S.value.forEach((o=>{o[0]===C.email&&o[1]===C.password&&(console.log("登入成功"),e=!0,b.error=!1,t("open-chat-room",C.email))})),e||(console.log("帳號或密碼錯誤"),b.error=!0,E())},A=async()=>{let e=!0;const o=await s.A.get("https://chat-room-end.onrender.com/api/readLoginAndSignin");if(o.data.data.forEach((o=>{if(o[0]===C.email)return console.log("帳號重複"),e=!1,b.duplicate=!0,b.success=!1,void E()})),e)try{const e=await s.A.post("https://chat-room-end.onrender.com/api/writeLoginAndSignin",{email:C.email,password:C.password});console.log("註冊成功：",e.data),b.success=!0,b.duplicate=!1,E()}catch(t){console.error("註冊失敗：",t),b.success=!1}},q=async()=>{try{if(!0===y.value){const e=await s.A.get("https://chat-room-end.onrender.com/api/readLoginAndSignin");console.log("讀取成功"),S.value=e.data.data,x()}else A()}catch(e){console.error("讀取數據失敗",e)}},E=()=>{b.error&&(document.querySelector(".emailOrPasswordError").classList.remove("remakeGlow"),setTimeout((()=>{document.querySelector(".emailOrPasswordError").classList.add("remakeGlow")}),200)),b.success&&(document.querySelector(".signinSuccess").classList.remove("remakeGlow"),setTimeout((()=>{document.querySelector(".signinSuccess").classList.add("remakeGlow")}),200)),b.duplicate&&(document.querySelector(".duplicate").classList.remove("remakeGlow"),setTimeout((()=>{document.querySelector(".duplicate").classList.add("remakeGlow")}),200))};return(e,o)=>((0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",null,[(0,r.Lk)("ul",c,[(0,r.Lk)("div",{class:"login",onClick:o[0]||(o[0]=e=>R())},"登入"),(0,r.Lk)("div",{class:"signin",onClick:o[1]||(o[1]=e=>O())},"註冊"),u]),(0,r.Lk)("div",d,[(0,r.Lk)("div",{class:(0,n.C4)(["loginDiv",{slide:!y.value}])},[(0,r.Lk)("form",{onSubmit:o[4]||(o[4]=(0,a.D$)((e=>q()),["prevent"]))},[(0,r.Lk)("div",null,[p,(0,r.bo)((0,r.Lk)("input",{type:"email","onUpdate:modelValue":o[2]||(o[2]=e=>(0,l.R1)(C).email=e),required:""},null,512),[[a.Jo,(0,l.R1)(C).email]])]),(0,r.Lk)("div",null,[m,(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":o[3]||(o[3]=e=>(0,l.R1)(C).password=e),required:""},null,512),[[a.Jo,(0,l.R1)(C).password]])]),v,(0,r.bo)((0,r.Lk)("div",f,"帳號或密碼錯誤",512),[[a.aG,b.error]])],32)],2),(0,r.Lk)("div",{class:(0,n.C4)(["signinDiv",{slide:!y.value}])},[(0,r.Lk)("form",{onSubmit:o[7]||(o[7]=(0,a.D$)((e=>q()),["prevent"]))},[(0,r.Lk)("div",null,[h,(0,r.bo)((0,r.Lk)("input",{type:"email","onUpdate:modelValue":o[5]||(o[5]=e=>(0,l.R1)(C).email=e),required:""},null,512),[[a.Jo,(0,l.R1)(C).email]])]),(0,r.Lk)("div",null,[k,(0,r.bo)((0,r.Lk)("input",{type:"password","onUpdate:modelValue":o[6]||(o[6]=e=>(0,l.R1)(C).password=e),required:""},null,512),[[a.Jo,(0,l.R1)(C).password]])]),g,(0,r.bo)((0,r.Lk)("div",L,"註冊成功！",512),[[a.aG,b.success]]),(0,r.bo)((0,r.Lk)("div",w,"帳號已註冊",512),[[a.aG,b.duplicate]])],32)],2)])])]))}};const y=b;var S=y;const C={class:"room"},R={class:"text"},O={viewBox:"0 0 20 20",width:"20",height:"20",fill:"currentColor",class:"xfx01vb x1lliihq x1tzjh5l",style:{color:"#ffffff","padding-top":"5px"}},x=(0,r.Lk)("g",{"fill-rule":"evenodd",transform:"translate(-90 -248)"},[(0,r.Lk)("path",{"fill-rule":"nonzero",d:"M95.322 258.928a.75.75 0 0 0-1.06 1.06l5.208 5.209a.75.75 0 0 0 1.06 0l5.209-5.208a.75.75 0 0 0-1.06-1.06L100 263.605l-4.678-4.678z"}),(0,r.Lk)("path",{"fill-rule":"nonzero",d:"M99.25 251.333v12.813a.75.75 0 1 0 1.5 0v-12.813a.75.75 0 1 0-1.5 0z"})],-1),A=[x],q=(0,r.Lk)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r.Lk)("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4M16 17l5-5-5-5M13 12h7",stroke:"#333","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),E=[q],K=(0,r.Lk)("div",{class:"spacerLine"},null,-1),j={class:"inputArea"};var X={__name:"room-item",props:["start-chat-room"],emits:["close-chat-room"],setup(e,{emit:o}){const t=e,i=(0,l.KR)([]),c=(0,l.KR)(""),u=(0,l.KR)(!1),d=(0,l.KR)(null);(0,r.sV)((async()=>{d.value=document.querySelector(".chatArea"),await p(),v(),h()}));const p=async()=>{try{const e=await s.A.get("https://chat-room-end.onrender.com/api/readChat");i.value=e.data.data}catch(e){console.error("Failed to fetch chat data:",e)}},m=async()=>{if(""!==c.value.trim())try{await s.A.post("https://chat-room-end.onrender.com/api/writeChat",{account:t.startChatRoom,message:c.value}),c.value="",v()}catch(e){console.log("留言失敗",e)}},v=()=>{let e=new WebSocket("wss://chat-room-end.onrender.com");e.onopen=()=>{e.send("Hello, server!")},e.onclose=()=>{},e.onmessage=()=>{p()}},f=()=>{const e=d.value;e.scrollTop+e.clientHeight<e.scrollHeight?u.value=!0:u.value=!1},h=()=>{const e=d.value;e.scrollTo({top:e.scrollHeight,behavior:"smooth"})},k=o,g=()=>{k("close-chat-room"),alert("登出成功")};return(0,r.wB)(i,(()=>{h()})),(e,o)=>((0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",C,[(0,r.Lk)("div",{class:"chatArea",onScroll:o[0]||(o[0]=e=>f())},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.value,((e,o)=>((0,r.uX)(),(0,r.CE)("div",{key:o,class:(0,n.C4)(["message",{mySend:e[0]===t.startChatRoom}])},[(0,r.Lk)("div",R,(0,n.v_)(e[1]),1)],2)))),128)),u.value?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"scrollIndicator",onClick:h},[((0,r.uX)(),(0,r.CE)("svg",O,A))])):(0,r.Q3)("",!0)],32),(0,r.Lk)("div",{class:"logout",onClick:g,title:"登出"},E),K,(0,r.Lk)("div",j,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>c.value=e),placeholder:"輸入你的留言...",onKeyup:(0,a.jR)(m,["enter"])},null,544),[[a.Jo,c.value]]),(0,r.Lk)("button",{onClick:m},"發送")])])]))}};const _=X;var G=_,H={__name:"App",setup(e){const o=(0,l.KR)(!0),t=(0,l.KR)(null),a=e=>{t.value=e,o.value=!1},n=()=>{o.value=!0};return(e,l)=>((0,r.uX)(),(0,r.CE)("div",null,[o.value?((0,r.uX)(),(0,r.Wv)(S,{key:0,onOpenChatRoom:a})):((0,r.uX)(),(0,r.Wv)(G,{key:1,onCloseChatRoom:n,"start-chat-room":t.value},null,8,["start-chat-room"]))]))}};const B=H;var P=B,T=t(223),U=t(922),V=t(884);const z={apiKey:"AIzaSyA-zLwPjnyaOCXO2XHBd7fWV4-nYBiCYuU",authDomain:"back-end-test-ed691.firebaseapp.com",databaseURL:"https://back-end-test-ed691-default-rtdb.firebaseio.com",projectId:"back-end-test-ed691",storageBucket:"back-end-test-ed691.appspot.com",messagingSenderId:"512756766561",appId:"1:512756766561:web:b39a4a55381aac7d7dd720",measurementId:"G-R40K0QHWWN"},I=(0,T.Wp)(z);(0,U.P5)(I),(0,V.aU)(I);(0,a.Ef)(P).mount("#app")}},o={};function t(a){var r=o[a];if(void 0!==r)return r.exports;var l=o[a]={exports:{}};return e[a](l,l.exports,t),l.exports}t.m=e,function(){var e=[];t.O=function(o,a,r,l){if(!a){var n=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],l=e[u][2];for(var s=!0,i=0;i<a.length;i++)(!1&l||n>=l)&&Object.keys(t.O).every((function(e){return t.O[e](a[i])}))?a.splice(i--,1):(s=!1,l<n&&(n=l));if(s){e.splice(u--,1);var c=r();void 0!==c&&(o=c)}}return o}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[a,r,l]}}(),function(){t.d=function(e,o){for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,a){var r,l,n=a[0],s=a[1],i=a[2],c=0;if(n.some((function(o){return 0!==e[o]}))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(i)var u=i(t)}for(o&&o(a);c<n.length;c++)l=n[c],t.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return t.O(u)},a=self["webpackChunkchat_room"]=self["webpackChunkchat_room"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(820)}));a=t.O(a)})();
//# sourceMappingURL=app.61adc445.js.map